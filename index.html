<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portofolio - Diva Arviansyah</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* Menggunakan font Inter sebagai default */
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden; /* Mencegah scroll horizontal global */
        }
        /* Transisi universal untuk semua elemen agar perubahan tema lebih mulus */
        * {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, fill 0.3s ease;
        }
        /* Style untuk scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 10px;
        }
        html.dark ::-webkit-scrollbar-track {
            background: #020617; /* slate-950 */
        }
        html.dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }
        /* Animasi kartu */
        .animated-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .animated-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }
        html.dark .animated-card:hover {
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.2), 0 8px 10px -6px rgb(0 0 0 / 0.2);
        }
        /* Navigasi aktif */
        .nav-active {
            color: #4f46e5 !important; /* indigo-600 */
            font-weight: 600;
        }
        html.dark .nav-active {
            color: #818cf8 !important; /* indigo-400 */
        }
        /* Animasi fade-in saat scroll */
        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        /* Gaya untuk Chat AI */
        .chat-bubble-user {
            background-color: #e0e7ff; /* indigo-100 */
            color: #3730a3; /* indigo-800 */
        }
        html.dark .chat-bubble-user {
            background-color: #3730a3; /* indigo-800 */
            color: #e0e7ff; /* indigo-100 */
        }
        .chat-bubble-ai {
            background-color: #f1f5f9; /* slate-100 */
            color: #1e293b; /* slate-800 */
        }
        html.dark .chat-bubble-ai {
            background-color: #1e293b; /* slate-800 */
            color: #f1f5f9; /* slate-100 */
        }
        /* Animasi titik-titik pengetikan */
        .typing-indicator span {
            animation: blink 1.4s infinite both;
        }
        .typing-indicator span:nth-child(2) {
            animation-delay: .2s;
        }
        .typing-indicator span:nth-child(3) {
            animation-delay: .4s;
        }
        @keyframes blink {
            0% { opacity: .2; }
            20% { opacity: 1; }
            100% { opacity: .2; }
        }
    </style>
    
    <!-- Prism.js untuk Syntax Highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    
    <script>
        // Konfigurasi Tailwind CSS
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
</head>
<body class="bg-slate-100 dark:bg-slate-950 text-slate-800 dark:text-slate-200">

    <!-- Header -->
    <header id="main-header" class="sticky top-0 z-50 transition-all duration-300 bg-slate-100/80 dark:bg-slate-950/80 backdrop-blur-sm">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-5">
                <a href="#" class="text-2xl font-bold text-slate-900 dark:text-white hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors">
                    Diva Arviansyah
                </a>
                <div class="flex items-center space-x-2">
                    <nav class="hidden md:flex items-center space-x-6">
                        <a href="#tentang" class="nav-link text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400">Tentang</a>
                        <a href="#keahlian" class="nav-link text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400">Keahlian</a>
                        <a href="#proyek" class="nav-link text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400">Proyek</a>
                        <a href="#ai-assistant" class="nav-link text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400">AI Asisten</a>
                        <a href="#kontak" class="nav-link text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400">Kontak</a>
                    </nav>
                    <button id="theme-toggle" class="p-2 rounded-full text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-800">
                        <span class="sr-only">Toggle theme</span>
                        <i id="sun-icon" data-lucide="sun" class="transition-transform duration-300"></i>
                        <i id="moon-icon" data-lucide="moon" class="hidden transition-transform duration-300"></i>
                    </button>
                    <button id="mobile-menu-btn" class="md:hidden p-2 rounded-full text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-800">
                        <span class="sr-only">Buka menu</span>
                        <i data-lucide="menu" id="menu-open-icon"></i>
                        <i data-lucide="x" id="menu-close-icon" class="hidden"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Menu Mobile -->
    <div id="mobile-menu" class="hidden md:hidden fixed inset-0 bg-slate-100/95 dark:bg-slate-950/95 backdrop-blur-sm z-40">
        <nav class="flex flex-col items-center justify-center h-full space-y-8">
            <a href="#tentang" class="mobile-nav-link text-2xl font-semibold text-slate-700 dark:text-slate-200">Tentang</a>
            <a href="#keahlian" class="mobile-nav-link text-2xl font-semibold text-slate-700 dark:text-slate-200">Keahlian</a>
            <a href="#proyek" class="mobile-nav-link text-2xl font-semibold text-slate-700 dark:text-slate-200">Proyek</a>
            <a href="#ai-assistant" class="mobile-nav-link text-2xl font-semibold text-slate-700 dark:text-slate-200">AI Asisten</a>
            <a href="#kontak" class="mobile-nav-link text-2xl font-semibold text-slate-700 dark:text-slate-200">Kontak</a>
        </nav>
    </div>

    <!-- Wrapper Utama -->
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
        <main>
            <section id="home" class="text-center py-20 sm:py-24 min-h-[calc(100vh-85px)] flex flex-col justify-center items-center">
                 <img src="https://media.giphy.com/media/M9gbBd9nbDrOTu1Mqx/giphy.gif" width="100" class="mb-4"/>
                <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-slate-900 dark:text-white inline-flex flex-wrap justify-center items-center gap-x-3">
                  <span>Hi there, I'm divarvian</span>
                  <img src="https://media.giphy.com/media/hvRJCLFzcasrR4ia7z/giphy.gif" width="40px"/>
                </h1>
                <p class="mt-4 text-lg md:text-xl text-slate-600 dark:text-slate-300 max-w-3xl">Seorang mahasiswa dan developer yang antusias menjelajahi persimpangan antara kode, kreativitas, dan performa.</p>
                <div class="mt-8 flex flex-wrap justify-center gap-4">
                    <a href="https://github.com/divarvian" target="_blank" rel="noopener noreferrer" class="bg-slate-800 text-white font-semibold px-6 py-3 rounded-lg hover:bg-slate-900 dark:bg-slate-200 dark:text-slate-900 dark:hover:bg-white transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-1 flex items-center gap-2">
                        <i data-lucide="github" class="w-5 h-5"></i>
                        GitHub
                    </a>
                    <a href="#proyek" class="bg-indigo-600 text-white font-semibold px-6 py-3 rounded-lg hover:bg-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-1">
                        Lihat Proyek
                    </a>
                </div>
            </section>

            <section id="tentang" class="py-16 sm:py-20 scroll-mt-20 fade-in-section">
                <div class="bg-white dark:bg-slate-900 p-6 sm:p-8 rounded-2xl shadow-lg">
                    <h2 class="text-3xl font-bold text-center mb-12 text-slate-900 dark:text-white">Tentang Saya</h2>
                    <div class="grid md:grid-cols-3 gap-8 md:gap-12 items-center">
                        <div class="md:col-span-1 flex justify-center">
                             <img src="https://github.com/divarvian.png" alt="Foto profil Diva Arviansyah" class="w-48 h-48 md:w-56 md:h-56 rounded-full object-cover shadow-xl border-4 border-white dark:border-slate-800">
                        </div>
                        <div class="md:col-span-2 text-slate-600 dark:text-slate-400 space-y-4 text-base md:text-lg">
                            <p>
                                Sebagai mahasiswa <strong>Pendidikan Teknologi Informasi</strong> di <strong>Universitas Brawijaya</strong>, saya menemukan hasrat dalam memecahkan masalah melalui kode. Saya percaya bahwa teknologi adalah alat yang ampuh untuk menciptakan solusi yang efisien dan elegan. Perjalanan saya dimulai dengan <strong>Java, C++, dan PHP</strong>, yang membangun fondasi logika dan struktur saya.
                            </p>
                            <p>
                                Kini, saya aktif memperluas wawasan di dunia pengembangan perangkat lunak modern:
                            </p>
                            <ul class="list-none space-y-3">
                                <li class="flex items-start gap-3">
                                    <i data-lucide="terminal-square" class="w-5 h-5 text-indigo-500 mt-1 flex-shrink-0"></i>
                                    <span>Saat ini mendalami <strong>Go (Golang)</strong> untuk membangun layanan backend yang cepat dan skalabel, serta menjelajahi pengembangan lintas platform.</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <i data-lucide="git-fork" class="w-5 h-5 text-indigo-500 mt-1 flex-shrink-0"></i>
                                    <span>Terbuka untuk berkolaborasi dalam proyek <strong>open-source</strong>, terutama yang berfokus pada utilitas dan alat bantu developer.</span>
                                </li>
                                 <li class="flex items-start gap-3">
                                    <i data-lucide="message-square" class="w-5 h-5 text-indigo-500 mt-1 flex-shrink-0"></i>
                                    <span>Mari terhubung! Saya senang berdiskusi tentang teknologi, proyek, atau ide-ide menarik lainnya.</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <section id="keahlian" class="py-16 sm:py-20 scroll-mt-20 fade-in-section">
                 <h2 class="text-3xl font-bold text-center mb-12 text-slate-900 dark:text-white">Bahasa & Peralatan</h2>
                 <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-6 text-center">
                    <div class="animated-card bg-white dark:bg-slate-900 p-6 rounded-xl shadow-md flex flex-col items-center justify-center gap-3">
                        <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/java/java-original.svg" alt="java" class="w-10 h-10">
                        <span class="font-semibold text-sm">Java</span>
                    </div>
                    <div class="animated-card bg-white dark:bg-slate-900 p-6 rounded-xl shadow-md flex flex-col items-center justify-center gap-3">
                        <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/cplusplus/cplusplus-original.svg" alt="cplusplus" class="w-10 h-10">
                        <span class="font-semibold text-sm">C++</span>
                    </div>
                    <div class="animated-card bg-white dark:bg-slate-900 p-6 rounded-xl shadow-md flex flex-col items-center justify-center gap-3">
                        <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/php/php-original.svg" alt="php" class="w-10 h-10">
                        <span class="font-semibold text-sm">PHP</span>
                    </div>
                    <div class="animated-card bg-white dark:bg-slate-900 p-6 rounded-xl shadow-md flex flex-col items-center justify-center gap-3">
                        <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/javascript/javascript-original.svg" alt="javascript" class="w-10 h-10">
                        <span class="font-semibold text-sm">JavaScript</span>
                    </div>
                    <div class="animated-card bg-white dark:bg-slate-900 p-6 rounded-xl shadow-md flex flex-col items-center justify-center gap-3">
                        <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/go/go-original-wordmark.svg" alt="go" class="w-10 h-10">
                        <span class="font-semibold text-sm">Go</span>
                    </div>
                    <div class="animated-card bg-white dark:bg-slate-900 p-6 rounded-xl shadow-md flex flex-col items-center justify-center gap-3">
                        <img src="https://www.vectorlogo.zone/logos/git-scm/git-scm-icon.svg" alt="git" class="w-10 h-10">
                        <span class="font-semibold text-sm">Git</span>
                    </div>
                 </div>
            </section>
            
            <section id="proyek-unggulan" class="py-16 sm:py-20 scroll-mt-20 fade-in-section">
                <div class="bg-white dark:bg-slate-900 p-6 sm:p-8 rounded-2xl shadow-lg">
                    <h2 class="text-3xl font-bold text-center mb-2 text-slate-900 dark:text-white">Proyek Unggulan</h2>
                    <p class="text-center text-indigo-500 dark:text-indigo-400 font-semibold text-lg mb-8">ImGui-Unity-Android</p>
                    
                    <div class="space-y-6 text-slate-600 dark:text-slate-400">
                        <div>
                            <h4 class="font-semibold text-slate-800 dark:text-slate-200 mb-2">Tujuan Proyek</h4>
                            <p>Menyediakan sebuah template siap pakai bagi developer game untuk mengintegrasikan <strong>Dear ImGui</strong>â€”sebuah library GUI yang populerâ€”ke dalam proyek <strong>Unity untuk platform Android</strong>. Tujuannya adalah mempercepat pembuatan menu debug, cheat, atau alat bantu internal lainnya langsung di dalam game.</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-800 dark:text-slate-200 mb-2">Fitur Utama</h4>
                            <ul class="list-disc list-inside space-y-2">
                                <li><strong>Render UI Cepat & Efisien:</strong> Menggunakan Dobby Hook untuk "menumpang" pada proses render native EGL (`eglSwapBuffers`), sehingga UI ImGui dapat ditampilkan di atas game tanpa membebani performa secara signifikan.</li>
                                <li><strong>Kontrol Sentuh Intuitif:</strong> Terintegrasi penuh dengan sistem input sentuh native Unity, memastikan semua interaksi pada menu berjalan mulus dan responsif di perangkat mobile.</li>
                                <li><strong>Implementasi Mudah:</strong> Cukup dengan memuat sebuah library, developer bisa langsung fokus pada pembuatan elemen UI tanpa perlu konfigurasi yang rumit.</li>
                            </ul>
                        </div>
                        
                        <div class="pt-4 border-t border-slate-200 dark:border-slate-700">
                            <a href="https://github.com/divarvian/ImGui-Unity-Android" target="_blank" rel="noopener noreferrer" class="text-indigo-600 dark:text-indigo-400 font-semibold hover:underline text-sm flex items-center gap-1">
                                <i data-lucide="github" class="w-4 h-4"></i>
                                Lihat Kode Sumber di GitHub
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <section id="proyek" class="py-16 sm:py-20 scroll-mt-20 fade-in-section">
                <h2 class="text-3xl font-bold text-center mb-12 text-slate-900 dark:text-white">Proyek Lainnya</h2>
                <div id="proyek-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div id="loading-placeholder" class="md:col-span-2 lg:col-span-3 text-center text-slate-500 dark:text-slate-400">
                        <div class="flex justify-center items-center gap-2">
                            <svg class="animate-spin h-5 w-5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <span>Memuat proyek dari GitHub...</span>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="statistik" class="py-16 sm:py-20 scroll-mt-20 fade-in-section">
                <h2 class="text-3xl font-bold text-center mb-12 text-slate-900 dark:text-white">Statistik GitHub</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-white dark:bg-slate-900 p-4 rounded-xl shadow-md">
                        <img id="stats-main" class="w-full h-auto" alt="divarvian-stats" />
                    </div>
                    <div class="bg-white dark:bg-slate-900 p-4 rounded-xl shadow-md">
                        <img id="stats-top-langs" class="w-full h-auto" alt="divarvian-top-langs" />
                    </div>
                    <div class="lg:col-span-2 bg-white dark:bg-slate-900 p-4 rounded-xl shadow-md">
                        <img id="stats-streak" class="w-full h-auto" alt="divarvian-streak" />
                    </div>
                </div>
            </section>

            <!-- Bagian AI Assistant -->
            <section id="ai-assistant" class="py-16 sm:py-20 scroll-mt-20 fade-in-section">
                <h2 class="text-3xl font-bold text-center mb-12 text-slate-900 dark:text-white">Tanya AI Asisten</h2>
                <div class="bg-white dark:bg-slate-900 p-4 sm:p-6 rounded-2xl shadow-lg max-w-3xl mx-auto">
                    <div id="chat-window" class="h-80 overflow-y-auto p-4 space-y-4 mb-4 border border-slate-200 dark:border-slate-700 rounded-lg">
                        <!-- Pesan AI pertama -->
                        <div class="flex gap-2.5">
                            <div class="w-8 h-8 rounded-full bg-indigo-500 text-white flex items-center justify-center flex-shrink-0">
                                <i data-lucide="bot" class="w-5 h-5"></i>
                            </div>
                            <div class="flex flex-col gap-1 w-full max-w-[320px]">
                                <div class="chat-bubble-ai p-3 rounded-e-xl rounded-es-xl">
                                    <p class="text-sm font-normal">Halo! ðŸ‘‹ Saya asisten AI Diva. Ada yang bisa saya bantu terkait informasi di portofolio ini?</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="typing-indicator-container" class="hidden flex gap-2.5 mb-4">
                         <div class="w-8 h-8 rounded-full bg-indigo-500 text-white flex items-center justify-center flex-shrink-0">
                            <i data-lucide="bot" class="w-5 h-5"></i>
                        </div>
                        <div class="flex items-center space-x-1 chat-bubble-ai p-3 rounded-e-xl rounded-es-xl typing-indicator">
                            <span class="w-2 h-2 bg-slate-500 rounded-full"></span>
                            <span class="w-2 h-2 bg-slate-500 rounded-full"></span>
                            <span class="w-2 h-2 bg-slate-500 rounded-full"></span>
                        </div>
                    </div>
                    <form id="ai-chat-form" class="flex items-center gap-2 sm:gap-4">
                        <input type="text" id="ai-chat-input" placeholder="Ketik pertanyaan Anda di sini..." class="w-full bg-slate-100 dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                        <button type="submit" class="bg-indigo-600 text-white font-semibold px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-300 disabled:bg-indigo-400 disabled:cursor-not-allowed flex items-center justify-center">
                            <span class="hidden sm:inline">Kirim</span>
                            <i data-lucide="send" class="sm:hidden w-5 h-5"></i>
                        </button>
                    </form>
                </div>
            </section>

            <section id="kontak" class="py-20 text-center scroll-mt-20 fade-in-section">
                <h2 class="text-3xl font-bold mb-4 text-slate-900 dark:text-white">Mari Terhubung</h2>
                <p class="text-slate-600 dark:text-slate-400 max-w-xl mx-auto mb-8">Saya selalu terbuka untuk diskusi dan kolaborasi. Jangan ragu untuk menghubungi saya melalui email atau platform di bawah ini.</p>
                <a href="mailto:diva.arviansyah@gmail.com" class="inline-block bg-indigo-600 text-white font-semibold px-8 py-4 rounded-lg hover:bg-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-1">
                    Kirim Email
                </a>
            </section>
        </main>

        <footer class="text-center py-10 border-t border-slate-200 dark:border-slate-800 mt-16">
            <div class="flex justify-center flex-wrap gap-6 mb-6">
                 <a href="https://github.com/divarvian" target="_blank" rel="noopener noreferrer" class="text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400" title="GitHub"><i data-lucide="github" class="w-6 h-6"></i></a>
                 <a href="https://linkedin.com/in/divarvian" target="_blank" rel="noopener noreferrer" class="text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400" title="LinkedIn"><i data-lucide="linkedin" class="w-6 h-6"></i></a>
                 <a href="https://instagram.com/divarvian" target="_blank" rel="noopener noreferrer" class="text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400" title="Instagram"><i data-lucide="instagram" class="w-6 h-6"></i></a>
                 <a href="https://x.com/divarvian" target="_blank" rel="noopener noreferrer" class="text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400" title="X/Twitter"><i data-lucide="twitter" class="w-6 h-6"></i></a>
                 <a href="https://youtube.com/@divarvian" target="_blank" rel="noopener noreferrer" class="text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400" title="YouTube"><i data-lucide="youtube" class="w-6 h-6"></i></a>
                 <a href="https://tiktok.com/@divarvian" target="_blank" rel="noopener noreferrer" class="text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400" title="TikTok">
                      <svg role="img" class="w-6 h-6 fill-current" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-2.43.05-4.84-.95-6.43-2.8-1.59-1.87-2.32-4.35-2.1-6.87.21-2.52 1.86-4.81 4.02-6.11 2.2-1.32 4.79-1.68 7.23-1.07v3.89c-.94-.25-1.91-.35-2.84-.31-1.63.08-3.21.77-4.28 1.95-1.07 1.18-1.57 2.75-1.55 4.38.02 1.64.55 3.22 1.52 4.47 1.01 1.29 2.5 2.11 4.12 2.22 1.63.1 3.2-.44 4.34-1.48.92-.86 1.48-2.05 1.48-3.33.01-3.43.01-6.86.01-10.28z"/></svg>
                 </a>
            </div>
            <p class="text-sm text-slate-500 dark:text-slate-400">
                Â© <span id="current-year"></span> Diva Arviansyah. Dirancang & Dibuat dengan Penuh Semangat.
            </p>
        </footer>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();

            const header = document.getElementById('main-header');
            const themeToggleBtn = document.getElementById('theme-toggle');
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuOpenIcon = document.getElementById('menu-open-icon');
            const menuCloseIcon = document.getElementById('menu-close-icon');

            // --- Efek Header Saat Scroll ---
            const handleScroll = () => {
                if (window.scrollY > 20) {
                    header.classList.add('shadow-md', 'bg-slate-100/95', 'dark:bg-slate-950/95', 'border-b', 'border-slate-200', 'dark:border-slate-800');
                } else {
                    header.classList.remove('shadow-md', 'bg-slate-100/95', 'dark:bg-slate-950/95', 'border-b', 'border-slate-200', 'dark:border-slate-800');
                }
            };
            window.addEventListener('scroll', handleScroll);

            // --- Logika Light/Dark Mode ---
            const GITHUB_USERNAME = 'divarvian';
            const statsTopLangsImg = document.getElementById('stats-top-langs');
            const statsMainImg = document.getElementById('stats-main');
            const statsStreakImg = document.getElementById('stats-streak');

            const updateStatsTheme = (isDark) => {
                if (!statsTopLangsImg || !statsMainImg || !statsStreakImg) return;

                const lightTheme = { bgColor: 'ffffff', borderColor: 'e2e8f0', titleColor: '4f46e5', textColor: '334155', iconColor: '4f46e5', streakStroke: '4f46e5' };
                const darkTheme = { bgColor: '0f172a', borderColor: '334155', titleColor: '818cf8', textColor: 'cbd5e1', iconColor: '818cf8', streakStroke: '818cf8' };
                const theme = isDark ? darkTheme : lightTheme;
                const locale = 'en';

                statsTopLangsImg.src = `https://github-readme-stats.vercel.app/api/top-langs?username=${GITHUB_USERNAME}&show_icons=true&locale=${locale}&layout=compact&bg_color=${theme.bgColor}&border_color=${theme.borderColor}&title_color=${theme.titleColor}&text_color=${theme.textColor}&icon_color=${theme.iconColor}&hide_border=true&card_width=450`;
                statsMainImg.src = `https://github-readme-stats.vercel.app/api?username=${GITHUB_USERNAME}&show_icons=true&locale=${locale}&bg_color=${theme.bgColor}&border_color=${theme.borderColor}&title_color=${theme.titleColor}&text_color=${theme.textColor}&icon_color=${theme.iconColor}&hide_border=true`;
                statsStreakImg.src = `https://streak-stats.demolab.com?user=${GITHUB_USERNAME}&background=${theme.bgColor}&border=${theme.borderColor}&stroke=${theme.streakStroke}&ring=${theme.streakStroke}&fire=f59e0b&currStreakNum=${theme.textColor}&sideNums=${theme.textColor}&currStreakLabel=${theme.textColor}&sideLabels=${theme.textColor}&hide_border=true`;
            };

            const iconSwitch = (isDark) => {
                sunIcon.classList.toggle('hidden', isDark);
                moonIcon.classList.toggle('hidden', !isDark);
            };

            const checkTheme = () => {
                const userTheme = localStorage.getItem('theme');
                const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches;
                const isDark = userTheme === 'dark' || (!userTheme && systemTheme);
                document.documentElement.classList.toggle('dark', isDark);
                iconSwitch(isDark);
                updateStatsTheme(isDark);
            };

            const toggleTheme = () => {
                const isDark = document.documentElement.classList.toggle('dark');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                iconSwitch(isDark);
                updateStatsTheme(isDark);
                const icon = isDark ? moonIcon : sunIcon;
                icon.style.transform = 'rotate(360deg)';
                setTimeout(() => icon.style.transform = '', 300);
            };

            themeToggleBtn.addEventListener('click', toggleTheme);
            checkTheme();

            // --- Logika Menu Mobile ---
            const toggleMobileMenu = () => {
                const isMenuOpen = !mobileMenu.classList.contains('hidden');
                mobileMenu.classList.toggle('hidden');
                menuOpenIcon.classList.toggle('hidden');
                menuCloseIcon.classList.toggle('hidden');
                document.body.style.overflow = isMenuOpen ? '' : 'hidden';
            };
            mobileMenuBtn.addEventListener('click', toggleMobileMenu);
            document.querySelectorAll('.mobile-nav-link').forEach(link => {
                link.addEventListener('click', toggleMobileMenu);
            });

            // --- Navigasi Aktif Saat Scroll ---
            const navLinks = document.querySelectorAll('.nav-link');
            const navObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        navLinks.forEach(link => {
                            link.classList.remove('nav-active');
                            if (link.getAttribute('href') === `#${id}`) {
                                link.classList.add('nav-active');
                            }
                        });
                    }
                });
            }, { rootMargin: '-30% 0px -70% 0px' });
            document.querySelectorAll('section[id]').forEach(section => navObserver.observe(section));
            
            // --- Animasi Fade-in Saat Scroll ---
            const fadeObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.fade-in-section').forEach(section => fadeObserver.observe(section));

            // --- Set Tahun & Ambil Proyek ---
            document.getElementById('current-year').textContent = new Date().getFullYear();
            fetchGithubProjects();

            async function fetchGithubProjects() {
                const proyekContainer = document.getElementById('proyek-container');
                const loadingPlaceholder = document.getElementById('loading-placeholder');
                try {
                    const response = await fetch(`https://api.github.com/users/${GITHUB_USERNAME}/repos?sort=updated&direction=desc`);
                    if (!response.ok) throw new Error(`Gagal mengambil data: ${response.status}`);
                    
                    const allProjects = await response.json();
                    const projects = allProjects.filter(repo => repo.name !== 'ImGui-Unity-Android');

                    loadingPlaceholder.remove();

                    if (projects.length === 0) {
                        proyekContainer.innerHTML = '<p class="md:col-span-2 lg:col-span-3 text-center">Tidak ada proyek publik lainnya yang dapat ditampilkan.</p>';
                        return;
                    }

                    projects.forEach(project => {
                        const projectCard = document.createElement('div');
                        projectCard.className = 'animated-card bg-white dark:bg-slate-900 rounded-xl shadow-md overflow-hidden flex flex-col h-full';
                        projectCard.innerHTML = `
                            <div class="p-6 flex flex-col flex-grow">
                                <h3 class="text-xl font-bold mb-2 text-slate-900 dark:text-white">${project.name}</h3>
                                <p class="text-slate-600 dark:text-slate-400 mb-4 text-sm flex-grow">${project.description || 'Tidak ada deskripsi.'}</p>
                                <div class="mb-4">
                                    ${project.language ? `<span class="inline-block bg-indigo-100 text-indigo-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded-full dark:bg-indigo-900 dark:text-indigo-300 self-start">${project.language}</span>` : ''}
                                </div>
                                <div class="mt-auto flex space-x-4 pt-4 border-t border-slate-200 dark:border-slate-700">
                                    <a href="${project.html_url}" target="_blank" rel="noopener noreferrer" class="text-indigo-600 dark:text-indigo-400 font-semibold hover:underline text-sm flex items-center gap-1">
                                        <i data-lucide="github" class="w-4 h-4"></i>
                                        Kode Sumber
                                    </a>
                                    ${project.homepage ? `<a href="${project.homepage}" target="_blank" rel="noopener noreferrer" class="text-indigo-600 dark:text-indigo-400 font-semibold hover:underline text-sm flex items-center gap-1">
                                        <i data-lucide="external-link" class="w-4 h-4"></i>
                                        Live Demo
                                    </a>` : ''}
                                </div>
                            </div>
                        `;
                        proyekContainer.appendChild(projectCard);
                    });

                    lucide.createIcons();

                } catch (error) {
                    console.error('Error fetching GitHub projects:', error);
                    loadingPlaceholder.innerHTML = '<p class="text-red-500 text-center md:col-span-2 lg:col-span-3">Gagal memuat proyek. Silakan coba muat ulang halaman.</p>';
                }
            }

            // --- Logika AI Assistant (Gemini) ---
            const aiChatForm = document.getElementById('ai-chat-form');
            const aiChatInput = document.getElementById('ai-chat-input');
            const chatWindow = document.getElementById('chat-window');
            const typingIndicator = document.getElementById('typing-indicator-container');
            const submitButton = aiChatForm.querySelector('button[type="submit"]');
            let chatHistory = [];

            const getPortfolioContext = () => {
                const aboutText = document.getElementById('tentang').innerText;
                const skillsText = document.getElementById('keahlian').innerText;
                const featuredProjectText = document.getElementById('proyek-unggulan').innerText;
                const otherProjects = Array.from(document.querySelectorAll('#proyek-container .animated-card')).map(card => card.innerText).join('\n');
                
                // PERUBAHAN: Menambahkan instruksi untuk menggunakan emoji.
                return `
                    Anda adalah asisten AI yang ramah dan membantu untuk portofolio milik Diva Arviansyah.
                    Gunakan informasi berikut untuk menjawab pertanyaan pengguna. Jawab dalam Bahasa Indonesia.
                    Buat jawaban tetap singkat, informatif, dan profesional. Gunakan emoji yang relevan untuk membuat jawaban lebih ramah dan menarik.

                    --- KONTEKS ---
                    ${aboutText}
                    \n\n
                    ${skillsText}
                    \n\n
                    ${featuredProjectText}
                    \n\n
                    Proyek Lainnya:
                    ${otherProjects}
                    --- AKHIR KONTEKS ---
                `;
            };

            const addMessageToChat = (message, sender) => {
                const messageElement = document.createElement('div');
                if (sender === 'user') {
                    messageElement.innerHTML = `
                        <div class="flex items-start gap-2.5 justify-end">
                            <div class="flex flex-col gap-1 w-full max-w-[320px]">
                                <div class="chat-bubble-user p-3 rounded-s-xl rounded-ee-xl">
                                    <p class="text-sm font-normal">${message}</p>
                                </div>
                            </div>
                             <div class="w-8 h-8 rounded-full bg-slate-700 text-white flex items-center justify-center flex-shrink-0">
                                <i data-lucide="user" class="w-5 h-5"></i>
                            </div>
                        </div>
                    `;
                } else {
                    // PERUBAHAN: Teks tebal diubah menjadi span dengan warna tema
                    const formattedMessage = message
                        .replace(/\*\*(.*?)\*\*/g, '<span class="font-semibold text-indigo-600 dark:text-indigo-400">$1</span>')
                        .replace(/\n/g, '<br>');

                    messageElement.innerHTML = `
                        <div class="flex gap-2.5">
                            <div class="w-8 h-8 rounded-full bg-indigo-500 text-white flex items-center justify-center flex-shrink-0">
                                <i data-lucide="bot" class="w-5 h-5"></i>
                            </div>
                            <div class="flex flex-col gap-1 w-full max-w-[320px]">
                                <div class="chat-bubble-ai p-3 rounded-e-xl rounded-es-xl">
                                    <div class="text-sm font-normal">${formattedMessage}</div>
                                </div>
                            </div>
                        </div>
                    `;
                }
                chatWindow.appendChild(messageElement);
                lucide.createIcons();
                chatWindow.scrollTop = chatWindow.scrollHeight;
            };

            aiChatForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const userInput = aiChatInput.value.trim();
                if (!userInput) return;

                addMessageToChat(userInput, 'user');
                aiChatInput.value = '';
                submitButton.disabled = true;
                typingIndicator.classList.remove('hidden');
                
                const context = getPortfolioContext();
                const prompt = `${context}\n\nPertanyaan Pengguna: ${userInput}`;

                // Menyimpan pertanyaan mentah dari pengguna ke riwayat
                chatHistory.push({ role: "user", parts: [{ text: userInput }] });

                try {
                    const payload = { contents: chatHistory };
                    const apiUrl = 'https://divarvian.my.id/gemini-proxy.php';
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        let errorData = { error: { message: `Request failed with status ${response.status}` } };
                        try { errorData = await response.json(); } catch (jsonError) {}
                        throw new Error(errorData.error?.message || `API Error: ${response.statusText}`);
                    }

                    const result = await response.json();
                    
                    let rawAiResponse = "Maaf, saya tidak dapat memproses permintaan Anda saat ini.";
                    if (result.candidates && result.candidates[0]?.content?.parts[0]?.text) {
                        rawAiResponse = result.candidates[0].content.parts[0].text;
                    } else if (result.error) {
                        rawAiResponse = `Terjadi kesalahan dari API: ${result.error.message}`;
                    }
                    
                    addMessageToChat(rawAiResponse, 'ai');
                    // Menyimpan respons mentah dari AI ke riwayat untuk konteks percakapan selanjutnya
                    chatHistory.push({ role: "model", parts: [{ text: rawAiResponse }] });

                } catch (error) {
                    console.error("Error calling backend proxy:", error);
                    addMessageToChat(`Terjadi kesalahan: ${error.message}. Pastikan file proxy PHP Anda sudah benar dan memiliki header CORS.`, 'ai');
                } finally {
                    submitButton.disabled = false;
                    typingIndicator.classList.add('hidden');
                }
            });
        });
    </script>

</body>
</html>
